<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskHub QA Sandbox</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header-title">üéØ TaskHub QA Sandbox</h1>
            <div class="header-controls">
                <!-- Auth buttons for unauthenticated users -->
                <div id="auth-buttons" class="auth-buttons">
                    <a href="login.html" class="nav-btn">–í–æ–π—Ç–∏</a>
                    <a href="register.html" class="nav-btn nav-btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>

                <!-- User info for authenticated users -->
                <div id="user-info" class="user-info" style="display: none;">
                    <span id="current-user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                    <button onclick="logout()" class="btn-logout">–í—ã–π—Ç–∏</button>
                </div>

                <!-- Main navigation -->
                <nav id="main-nav" class="nav" style="display: none;">
                    <button class="nav-btn active" onclick="showSection('dashboard')">–î–∞—à–±–æ—Ä–¥</button>
                    <button class="nav-btn" onclick="showSection('users')">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                    <button class="nav-btn" onclick="showSection('projects')">–ü—Ä–æ–µ–∫—Ç—ã</button>
                    <button class="nav-btn" onclick="showSection('test-cases')">–¢–µ—Å—Ç-–∫–µ–π—Å—ã</button>
                    <button class="nav-btn" onclick="showSection('api-docs')">API Docs</button>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>–î–∞—à–±–æ—Ä–¥</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                        <div class="stat-number" id="users-count">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ü—Ä–æ–µ–∫—Ç—ã</h3>
                        <div class="stat-number" id="projects-count">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>–¢–µ—Å—Ç-–∫–µ–π—Å—ã</h3>
                        <div class="stat-number" id="test-cases-count">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã</h3>
                        <div class="stat-number" id="active-tests-count">-</div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="showSection('users')">‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                        <button class="action-btn" onclick="showSection('projects')">üìÅ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
                        <button class="action-btn" onclick="showSection('test-cases')">üß™ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å</button>
                        <button class="action-btn" onclick="openSwagger()">üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</button>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                    <button class="btn-primary" onclick="showUserModal()">‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                </div>

                <div class="filters">
                    <input type="text" id="user-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..." onkeyup="filterUsers()">
                </div>

                <div class="table-container">
                    <table id="users-table" class="data-table">
                        <thead>
                            <tr>
                                <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                <th>Email</th>
                                <th>–†–æ–ª—å</th>
                                <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="users-tbody">
                            <tr>
                                <td colspan="5" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects" class="section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</h2>
                    <button class="btn-primary" onclick="showProjectModal()">‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
                </div>

                <div class="filters">
                    <input type="text" id="project-search" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤..." onkeyup="filterProjects()">
                </div>

                <div class="table-container">
                    <table id="projects-table" class="data-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–¢–µ—Å—Ç-–∫–µ–π—Å–æ–≤</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="projects-tbody">
                            <tr>
                                <td colspan="6" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Test Cases Section -->
            <section id="test-cases" class="section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞–º–∏</h2>
                    <button class="btn-primary" onclick="showTestCaseModal()">‚ûï –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å</button>
                </div>

                <div class="filters">
                    <select id="project-filter" onchange="filterTestCases()">
                        <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                    </select>
                    <select id="status-filter" onchange="filterTestCases()">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                        <option value="review">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</option>
                        <option value="approved">–û–¥–æ–±—Ä–µ–Ω</option>
                        <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
                        <option value="passed">–ü—Ä–æ–π–¥–µ–Ω</option>
                        <option value="failed">–ü—Ä–æ–≤–∞–ª–µ–Ω</option>
                        <option value="blocked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</option>
                    </select>
                    <input type="text" id="test-case-search" placeholder="–ü–æ–∏—Å–∫ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤..." onkeyup="filterTestCases()">
                </div>

                <div class="table-container">
                    <table id="test-cases-table" class="data-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ü—Ä–æ–µ–∫—Ç</th>
                                <th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                                <th>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="test-cases-tbody">
                            <tr>
                                <td colspan="7" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- API Docs Section -->
            <section id="api-docs" class="section">
                <h2>API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h2>
                <div class="api-info">
                    <p>–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Swagger UI:</p>
                    <a href="/api-docs" target="_blank" class="swagger-link">
                        üìö –û—Ç–∫—Ä—ã—Ç—å Swagger Documentation
                    </a>
                </div>

                <div class="api-endpoints">
                    <h3>–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:</h3>
                    <ul>
                        <li><code>GET /api/users</code> - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                        <li><code>GET /api/projects</code> - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</li>
                        <li><code>GET /api/test-cases</code> - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã</li>
                        <li><code>POST /api/users</code> - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                        <li><code>POST /api/projects</code> - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</li>
                        <li><code>POST /api/test-cases</code> - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å</li>
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <!-- Modals -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('user-modal')">&times;</span>
            <h3 id="user-modal-title">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
            <form id="user-form">
                <div class="form-group">
                    <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="role">–†–æ–ª—å:</label>
                    <select id="role" name="role">
                        <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                        <option value="qa">QA Engineer</option>
                        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <div id="project-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('project-modal')">&times;</span>
            <h3 id="project-modal-title">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
            <form id="project-form">
                <div class="form-group">
                    <label for="project-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:</label>
                    <input type="text" id="project-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="project-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea id="project-description" name="description" rows="3"></textarea>
                </div>
                <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <div id="test-case-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('test-case-modal')">&times;</span>
            <h3 id="test-case-modal-title">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç-–∫–µ–π—Å</h3>
            <form id="test-case-form">
                <div class="form-group">
                    <label for="test-case-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞:</label>
                    <input type="text" id="test-case-title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="test-case-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea id="test-case-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="test-case-project">–ü—Ä–æ–µ–∫—Ç:</label>
                    <select id="test-case-project" name="project_id" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="test-case-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                    <select id="test-case-priority" name="priority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        <option value="critical">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="test-case-status">–°—Ç–∞—Ç—É—Å:</label>
                    <select id="test-case-status" name="status">
                        <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                        <option value="review">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</option>
                        <option value="approved">–û–¥–æ–±—Ä–µ–Ω</option>
                        <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
                        <option value="passed">–ü—Ä–æ–π–¥–µ–Ω</option>
                        <option value="failed">–ü—Ä–æ–≤–∞–ª–µ–Ω</option>
                        <option value="blocked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="test-case-assigned-to">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:</label>
                    <select id="test-case-assigned-to" name="assigned_to">
                        <option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="test-case-steps">–®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                    <textarea id="test-case-steps" name="steps" rows="4" placeholder="1. –®–∞–≥ –ø–µ—Ä–≤—ã–π&#10;2. –®–∞–≥ –≤—Ç–æ—Ä–æ–π&#10;3. –®–∞–≥ —Ç—Ä–µ—Ç–∏–π"></textarea>
                </div>
                <div class="form-group">
                    <label for="test-case-expected-result">–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</label>
                    <textarea id="test-case-expected-result" name="expected_result" rows="2"></textarea>
                </div>
                <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>


    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
